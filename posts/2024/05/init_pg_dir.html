<!DOCTYPE html>
<html lang="cn">
<head>
        <meta charset="utf-8" />
        <title>init_pg_dir页表</title>
        <link rel="stylesheet" href="../../../theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../../">Linux学习笔记 </a></h1>
                <nav><ul>
                    <li class="active"><a href="../../../category/linux.html">Linux</a></li>
                </ul>
                </nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="../../../posts/2024/05/init_pg_dir.html" rel="bookmark"
           title="Permalink to init_pg_dir页表">init_pg_dir页表</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <span>四 23 五月 2024</span>
<span>| tags: <a href="../../../tag/linux.html">Linux</a></span>
</footer><!-- /.post-info -->      <div class="section" id="section-1">
<h2>页表分配和释放</h2>
<p>init_pg_dir页表的主要的作用就是在boot阶段，能够把kernel image的编译时VA(也就是0xffffxxxxxxxxxxxx,但是在使能了CONFIG_RANDOMIZE_BASE会加一个offset)映射成u-boot加载时的PA。
所以这个页表的大小就是根据kernel image所占用空间来决定。</p>
<div class="highlight"><pre><span></span><span class="cp">#define EARLY_PAGES(vstart, vend, add) ( 1                      </span><span class="cm">/* PGDIR page */</span><span class="cp">                                \</span>
<span class="cp">                        + EARLY_PGDS((vstart), (vend), add)     </span><span class="cm">/* each PGDIR needs a next level page table */</span><span class="cp">  \</span>
<span class="cp">                        + EARLY_PUDS((vstart), (vend), add)     </span><span class="cm">/* each PUD needs a next level page table */</span><span class="cp">    \</span>
<span class="cp">                        + EARLY_PMDS((vstart), (vend), add))    </span><span class="cm">/* each PMD needs a next level page table */</span>
<span class="cp">#define INIT_DIR_SIZE (PAGE_SIZE * EARLY_PAGES(KIMAGE_VADDR, _end, EXTRA_PAGE))</span>
</pre></div>
<p>这里为什么要加一个EXTRA_PAGE？ 因为kernel是relocatable，所以如果做了relocate,在最差的情况下，它有可能地址会跨一个page，所以就需要一个额外的页表：</p>
<div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> * A relocatable kernel may execute from an address that differs from the one at</span>
<span class="cm"> * which it was linked. In the worst case, its runtime placement may intersect</span>
<span class="cm"> * with two adjacent PGDIR entries, which means that an additional page table</span>
<span class="cm"> * may be needed at each subordinate level.</span>
<span class="cm"> */</span>
<span class="cp">#define EXTRA_PAGE      __is_defined(CONFIG_RELOCATABLE)</span>
</pre></div>
<p>这个页表是在Link脚本里面进行分配：</p>
<div class="highlight"><pre><span></span><span class="err">.</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="nf">ALIGN</span><span class="p">(</span><span class="no">PAGE_SIZE</span><span class="p">)</span><span class="c1">;</span>
<span class="nf">init_pg_dir</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="p">.</span><span class="c1">;</span>
<span class="err">.</span><span class="w"> </span><span class="err">+=</span><span class="w"> </span><span class="nf">INIT_DIR_SIZE</span><span class="c1">;</span>
<span class="nf">init_pg_end</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="p">.</span><span class="c1">;</span>
</pre></div>
<p>在MMU切换到swapper_pg_dir页表之后，会在setup_arch-&gt;paging_init 里面进行回收，这样系用就可以重新利用这部分内存：</p>
<div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="nf">paging_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="n">pgd_t</span><span class="w"> </span><span class="o">*</span><span class="n">pgdp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pgd_set_fixmap</span><span class="p">(</span><span class="n">__pa_symbol</span><span class="p">(</span><span class="n">swapper_pg_dir</span><span class="p">));</span>
<span class="w">        </span><span class="c1">//.......</span>
<span class="w">        </span><span class="n">cpu_replace_ttbr1</span><span class="p">(</span><span class="n">lm_alias</span><span class="p">(</span><span class="n">swapper_pg_dir</span><span class="p">),</span><span class="w"> </span><span class="n">init_idmap_pg_dir</span><span class="p">);</span>
<span class="w">        </span><span class="n">init_mm</span><span class="p">.</span><span class="n">pgd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">swapper_pg_dir</span><span class="p">;</span>

<span class="w">        </span><span class="n">memblock_phys_free</span><span class="p">(</span><span class="n">__pa_symbol</span><span class="p">(</span><span class="n">init_pg_dir</span><span class="p">),</span>
<span class="w">                           </span><span class="n">__pa_symbol</span><span class="p">(</span><span class="n">init_pg_end</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">__pa_symbol</span><span class="p">(</span><span class="n">init_pg_dir</span><span class="p">));</span>
</pre></div>
<p>要建立init_pg_dir页表，就要通过写init_pg_dir这个页表来建立kernel VA到PA的映射。
为了加快boot速度，kernel会在 1:1 mapping完成并打开MMU和cache之后，才开始建立init_pg_dir页表。
所以就需要在1:1页表(init_idmap_pg_dir)中建立init_pg_dir这部分内存的1:1映射. 这部分代码在 primary_entry-&gt; create_idmap:</p>
<div class="highlight"><pre><span></span><span class="cm">/* Remap the kernel page tables r/w in the ID map */</span>
<span class="nf">adrp</span><span class="w">    </span><span class="no">x1</span><span class="p">,</span><span class="w"> </span><span class="no">_text</span>
<span class="nf">adrp</span><span class="w">    </span><span class="no">x2</span><span class="p">,</span><span class="w"> </span><span class="no">init_pg_dir</span>
<span class="nf">adrp</span><span class="w">    </span><span class="no">x3</span><span class="p">,</span><span class="w"> </span><span class="no">init_pg_end</span>
<span class="nf">bic</span><span class="w">     </span><span class="no">x4</span><span class="p">,</span><span class="w"> </span><span class="no">x2</span><span class="p">,</span><span class="w"> </span><span class="c1">#SWAPPER_BLOCK_SIZE - 1</span>
<span class="nf">mov_q</span><span class="w">   </span><span class="no">x5</span><span class="p">,</span><span class="w"> </span><span class="no">SWAPPER_RW_MMUFLAGS</span>
<span class="nf">mov</span><span class="w">     </span><span class="no">x6</span><span class="p">,</span><span class="w"> </span><span class="c1">#SWAPPER_BLOCK_SHIFT</span>
<span class="nf">bl</span><span class="w">      </span><span class="no">remap_region</span>
</pre></div>
<p>页表建立完成之后，可以看到init_pg_dir区域是可以读写的：</p>
<div class="highlight"><pre><span></span><span class="err">&gt;</span><span class="nf">mmu</span><span class="w"> </span><span class="no">print</span><span class="w"> </span><span class="no">EL1N_S1_TTBR0_EL1</span><span class="w"> </span><span class="no">TTBR0_EL1</span><span class="err">=</span><span class="no">init_idmap_pg_dir</span>
<span class="nf">Input</span><span class="w"> </span><span class="no">Address</span><span class="w">   </span><span class="err">|</span><span class="w"> </span><span class="no">Type</span><span class="w">           </span><span class="err">|</span><span class="w"> </span><span class="no">Next</span><span class="w"> </span><span class="no">Level</span><span class="w">            </span><span class="err">|</span><span class="w"> </span><span class="no">Output</span><span class="w"> </span><span class="no">Address</span><span class="w">        </span><span class="err">|</span><span class="w"> </span><span class="no">Properties</span>
<span class="err">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="err">+</span><span class="w"> </span><span class="err">0</span><span class="nf">x00000000</span><span class="w">    </span><span class="err">|</span><span class="w"> </span><span class="no">TTBR0_EL1</span><span class="w">      </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085A90000</span><span class="w"> </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">TBI1</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">TBI0</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AS</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">IPS</span><span class="err">=</span><span class="mi">4</span><span class="no">GB</span><span class="p">,</span><span class="w"> </span><span class="no">TG1</span><span class="err">=</span><span class="mi">4</span><span class="no">KB</span><span class="p">,</span><span class="w"> </span><span class="no">SH1</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">ORGN1</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">IRGN1</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">EPD1</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">A1</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">T1SZ</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">TG0</span><span class="err">=</span><span class="mi">4</span><span class="no">KB</span><span class="p">,</span><span class="w"> </span><span class="no">SH0</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">ORGN0</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">IRGN0</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">EPD0</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">T0SZ</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">HPD1</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">HPD0</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">HD</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">HA</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">CnP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">ASID</span><span class="err">=</span><span class="mi">0</span>
<span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">0</span><span class="nf">x00000000</span><span class="w">   </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="no">Table</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085A91000</span><span class="w"> </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">APTable</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">UXNTable</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXNTable</span><span class="err">=</span><span class="mi">0</span>
<span class="w">  </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x00000000</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="no">Invalid</span><span class="w">        </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span>
<span class="w">  </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x40000000</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="no">Invalid</span><span class="w">        </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span>
<span class="w">  </span><span class="err">+</span><span class="w"> </span><span class="err">0</span><span class="nf">x80000000</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="no">Table</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085A92000</span><span class="w"> </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">APTable</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">UXNTable</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXNTable</span><span class="err">=</span><span class="mi">0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x80000000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Invalid</span><span class="w"> </span><span class="p">(</span><span class="no">x32</span><span class="p">)</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x84000000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000084000000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x84200000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000084200000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x84400000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000084400000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x84600000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000084600000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x84800000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000084800000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x84A00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000084A00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x84C00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000084C00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x84E00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000084E00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x85000000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085000000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x85200000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085200000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x85400000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085400000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x85600000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085600000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x85800000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085800000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x85A00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085A00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x85C00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085C00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x85E00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000085E00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x86000000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000086000000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x86200000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000086200000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x2</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x86400000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000086400000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x86600000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000082000000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x86800000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Level</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="no">Block</span><span class="w">  </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w"> </span><span class="no">NP</span><span class="p">:</span><span class="mi">0x0000000082200000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">UXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">PXN</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">Contiguous</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">DBM</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">GP</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">nG</span><span class="err">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">AF</span><span class="err">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">SH</span><span class="err">=</span><span class="mi">0x3</span><span class="p">,</span><span class="w"> </span><span class="no">AP</span><span class="err">=</span><span class="mi">0x0</span><span class="p">,</span><span class="w"> </span><span class="no">AttrIndx</span><span class="err">=</span><span class="mi">0x0</span>
<span class="w">   </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x86A00000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Invalid</span><span class="w"> </span><span class="p">(</span><span class="no">x459</span><span class="p">)</span><span class="w"> </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span>
<span class="w">  </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">xC0000000</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="no">Invalid</span><span class="w"> </span><span class="p">(</span><span class="no">x509</span><span class="p">)</span><span class="w"> </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span>
<span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">0</span><span class="nf">x8000000000</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="no">Invalid</span><span class="w"> </span><span class="p">(</span><span class="no">x511</span><span class="p">)</span><span class="w"> </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span><span class="w">                       </span><span class="err">|</span>
<span class="err">&gt;</span><span class="nf">p</span><span class="err">/</span><span class="no">x</span><span class="w"> </span><span class="no">init_pg_end</span>
<span class="nf">$9</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="p">(</span><span class="no">unsigned</span><span class="w"> </span><span class="no">char</span><span class="p">*)</span><span class="w"> </span><span class="no">EL1N</span><span class="p">:</span><span class="mi">0x00000000865DD000</span>
<span class="err">&gt;</span><span class="nf">p</span><span class="err">/</span><span class="no">x</span><span class="w"> </span><span class="no">init_pg_dir</span>
<span class="nf">$10</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="p">(</span><span class="no">unsigned</span><span class="w"> </span><span class="no">char</span><span class="p">*)</span><span class="w"> </span><span class="no">EL1N</span><span class="p">:</span><span class="mi">0x00000000865DA000</span>
</pre></div>
</div>
<div class="section" id="init-pg-dir-1">
<h2>init_pg_dir 页表的创建</h2>
<p>在MMU enable之后，就可以开始使用这个页表了。在 <a class="reference external" href="../../../posts/2024/05/fdt_mapping.html">FDT的区域的Map过程</a> ，有提到init_pg_dir会在__primary_switch被临时用来做栈来获取kaslr的offset。</p>
<div class="highlight"><pre><span></span><span class="nf">SYM_FUNC_START_LOCAL</span><span class="p">(</span><span class="no">__primary_switch</span><span class="p">)</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x1</span><span class="p">,</span><span class="w"> </span><span class="no">reserved_pg_dir</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x2</span><span class="p">,</span><span class="w"> </span><span class="no">init_idmap_pg_dir</span>
<span class="w">        </span><span class="nf">bl</span><span class="w">      </span><span class="no">__enable_mmu</span>
<span class="c1">#ifdef CONFIG_RELOCATABLE</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x23</span><span class="p">,</span><span class="w"> </span><span class="no">KERNEL_START</span>
<span class="w">        </span><span class="nf">and</span><span class="w">     </span><span class="no">x23</span><span class="p">,</span><span class="w"> </span><span class="no">x23</span><span class="p">,</span><span class="w"> </span><span class="no">MIN_KIMG_ALIGN</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">1</span>
<span class="c1">#ifdef CONFIG_RANDOMIZE_BASE</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="no">x22</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x1</span><span class="p">,</span><span class="w"> </span><span class="no">init_pg_end</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="no">x1</span>
<span class="w">        </span><span class="nf">mov</span><span class="w">     </span><span class="no">x29</span><span class="p">,</span><span class="w"> </span><span class="no">xzr</span>
<span class="w">        </span><span class="nf">bl</span><span class="w">      </span><span class="no">__pi_kaslr_early_init</span>
<span class="w">        </span><span class="nf">and</span><span class="w">     </span><span class="no">x24</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="c1">#SZ_2M - 1             // capture memstart offset seed</span>
<span class="w">        </span><span class="nf">bic</span><span class="w">     </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="c1">#SZ_2M - 1</span>
<span class="w">        </span><span class="nf">orr</span><span class="w">     </span><span class="no">x23</span><span class="p">,</span><span class="w"> </span><span class="no">x23</span><span class="p">,</span><span class="w"> </span><span class="no">x0</span><span class="w">                    </span><span class="c1">// record kernel offset</span>
<span class="c1">#endif</span>
<span class="c1">#endif</span>
<span class="nf">bl</span><span class="w">      </span><span class="no">clear_page_tables</span>
<span class="nf">bl</span><span class="w">      </span><span class="no">create_kernel_mapping</span>
</pre></div>
<p>在使用完成之后，会调用clear_page_tables 来清除之前可能遗留的内容。 因为没有使用的页表应该初始化成全0.
在create_kernel_mapping函数中，这个KIMAGE_VADDR对应的就是kernel的VA，它的PA应该对应_text。 但是使能了relocation，那么就可以需要加上x23 这个offset。</p>
<div class="highlight"><pre><span></span><span class="nf">SYM_FUNC_START_LOCAL</span><span class="p">(</span><span class="no">create_kernel_mapping</span><span class="p">)</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="no">init_pg_dir</span>
<span class="w">        </span><span class="nf">mov_q</span><span class="w">   </span><span class="no">x5</span><span class="p">,</span><span class="w"> </span><span class="no">KIMAGE_VADDR</span><span class="w">                </span><span class="c1">// compile time __va(_text)</span>
<span class="c1">#ifdef CONFIG_RELOCATABLE</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x5</span><span class="p">,</span><span class="w"> </span><span class="no">x5</span><span class="p">,</span><span class="w"> </span><span class="no">x23</span><span class="w">                     </span><span class="c1">// add KASLR displacement</span>
<span class="c1">#endif</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x6</span><span class="p">,</span><span class="w"> </span><span class="no">_end</span><span class="w">                        </span><span class="c1">// runtime __pa(_end)</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x3</span><span class="p">,</span><span class="w"> </span><span class="no">_text</span><span class="w">                       </span><span class="c1">// runtime __pa(_text)</span>
<span class="w">        </span><span class="nf">sub</span><span class="w">     </span><span class="no">x6</span><span class="p">,</span><span class="w"> </span><span class="no">x6</span><span class="p">,</span><span class="w"> </span><span class="no">x3</span><span class="w">                      </span><span class="c1">// _end - _text</span>
<span class="w">        </span><span class="nf">add</span><span class="w">     </span><span class="no">x6</span><span class="p">,</span><span class="w"> </span><span class="no">x6</span><span class="p">,</span><span class="w"> </span><span class="no">x5</span><span class="w">                      </span><span class="c1">// runtime __va(_end)</span>
<span class="w">        </span><span class="nf">mov_q</span><span class="w">   </span><span class="no">x7</span><span class="p">,</span><span class="w"> </span><span class="no">SWAPPER_RW_MMUFLAGS</span>

<span class="w">        </span><span class="nf">map_memory</span><span class="w"> </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="no">x1</span><span class="p">,</span><span class="w"> </span><span class="no">x5</span><span class="p">,</span><span class="w"> </span><span class="no">x6</span><span class="p">,</span><span class="w"> </span><span class="no">x7</span><span class="p">,</span><span class="w"> </span><span class="no">x3</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="no">VA_BITS</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="no">PGDIR_SHIFT</span><span class="p">),</span><span class="w"> </span><span class="no">x10</span><span class="p">,</span><span class="w"> </span><span class="no">x11</span><span class="p">,</span><span class="w"> </span><span class="no">x12</span><span class="p">,</span><span class="w"> </span><span class="no">x13</span><span class="p">,</span><span class="w"> </span><span class="no">x14</span>

<span class="w">        </span><span class="nf">dsb</span><span class="w">     </span><span class="no">ishst</span><span class="w">                           </span><span class="c1">// sync with page table walker</span>
<span class="w">        </span><span class="nf">ret</span>
<span class="nf">SYM_FUNC_END</span><span class="p">(</span><span class="no">create_kernel_mapping</span><span class="p">)</span>
</pre></div>
<p>在函数create_kernel_mapping执行完成之后，可以看从_text 到_end的PA都建立了页表，如下：</p>
<div class="highlight"><pre><span></span>&gt;mmu<span class="w"> </span>print<span class="w"> </span>EL1N_S1_TTBR1_EL1<span class="w"> </span><span class="nv">TTBR1_EL1</span><span class="o">=</span>init_pg_dir
Input<span class="w"> </span>Address<span class="w">           </span><span class="p">|</span><span class="w"> </span>Type<span class="w">           </span><span class="p">|</span><span class="w"> </span>Next<span class="w"> </span>Level<span class="w">            </span><span class="p">|</span><span class="w"> </span>Output<span class="w"> </span>Address<span class="w">        </span><span class="p">|</span><span class="w"> </span>Properties
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
+<span class="w"> </span>0xFFFF000000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>TTBR1_EL1<span class="w">      </span><span class="p">|</span><span class="w"> </span>NP:0x00000000865DA000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">TBI1</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">TBI0</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">AS</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">IPS</span><span class="o">=</span>256TB,<span class="w"> </span><span class="nv">TG1</span><span class="o">=</span>4KB,<span class="w"> </span><span class="nv">SH1</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">ORGN1</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">IRGN1</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">EPD1</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">A1</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">T1SZ</span><span class="o">=</span><span class="m">16</span>,<span class="w"> </span><span class="nv">TG0</span><span class="o">=</span>4KB,<span class="w"> </span><span class="nv">SH0</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">ORGN0</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">IRGN0</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">EPD0</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">T0SZ</span><span class="o">=</span><span class="m">16</span>,<span class="w"> </span><span class="nv">HPD1</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">HPD0</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">HD</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">HA</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">CnP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">ASID</span><span class="o">=</span><span class="m">0</span>
<span class="w"> </span>-<span class="w"> </span>0xFFFF000000000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x256<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w"> </span>+<span class="w"> </span>0xFFFF800000000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">0</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x00000000865DB000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">  </span>+<span class="w"> </span>0xFFFF800000000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">1</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x00000000865DC000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">   </span>-<span class="w"> </span>0xFFFF800000000000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x64<span class="o">)</span><span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008000000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008200000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084200000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008400000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084400000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008600000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084600000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008800000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084800000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008A00000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084A00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008C00000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084C00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008E00000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084E00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009000000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009200000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085200000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009400000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085400000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009600000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085600000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009800000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085800000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009A00000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085A00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009C00000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085C00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009E00000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085E00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A000000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A200000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086200000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A400000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086400000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A600000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x429<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">  </span>-<span class="w"> </span>0xFFFF800040000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x511<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w"> </span>-<span class="w"> </span>0xFFFF808000000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x255<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
&gt;p/x<span class="w"> </span>_text
<span class="nv">$13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>unsigned<span class="w"> </span>char*<span class="o">)</span><span class="w"> </span>EL1N:0x0000000084000000
&gt;p/x<span class="w"> </span><span class="nv">$x23</span>
<span class="nv">$14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>0x0
&gt;p/x<span class="w"> </span>_end
<span class="nv">$15</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>unsigned<span class="w"> </span>char*<span class="o">)</span><span class="w"> </span>EL1N:0x00000000865E0000
</pre></div>
</div>
<div class="section" id="init-pg-dir-2">
<h2>init_pg_dir 的使能和使用</h2>
<p>在创建好了页表之后，在函数primary_entry-&gt; __primary_switch 就可以把这个页表写到TTBR1中了：</p>
<div class="highlight"><pre><span></span><span class="nf">SYM_FUNC_START_LOCAL</span><span class="p">(</span><span class="no">__primary_switch</span><span class="p">)</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x1</span><span class="p">,</span><span class="w"> </span><span class="no">reserved_pg_dir</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x2</span><span class="p">,</span><span class="w"> </span><span class="no">init_idmap_pg_dir</span>
<span class="w">    </span><span class="c1">//.....</span>
<span class="w">        </span><span class="nf">bl</span><span class="w">      </span><span class="no">clear_page_tables</span>
<span class="w">        </span><span class="nf">bl</span><span class="w">      </span><span class="no">create_kernel_mapping</span>

<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x1</span><span class="p">,</span><span class="w"> </span><span class="no">init_pg_dir</span>
<span class="w">        </span><span class="nf">load_ttbr1</span><span class="w"> </span><span class="no">x1</span><span class="p">,</span><span class="w"> </span><span class="no">x1</span><span class="p">,</span><span class="w"> </span><span class="no">x2</span>
</pre></div>
<p>在设置好了TTBR1之后，kernel就可以跳转到VA(0xffff开头的地址) 之后继续执行，如下这段代码从1:1 的VA转换成kernel真正的VA, __primary_switched就是运行在0xffff开头的VA</p>
<div class="highlight"><pre><span></span><span class="nf">SYM_FUNC_START_LOCAL</span><span class="p">(</span><span class="no">__primary_switch</span><span class="p">)</span>
<span class="w">        </span><span class="c1">//....</span>
<span class="w">        </span><span class="nf">ldr</span><span class="w">     </span><span class="no">x8</span><span class="p">,</span><span class="w"> </span><span class="err">=</span><span class="no">__primary_switched</span>
<span class="w">        </span><span class="nf">adrp</span><span class="w">    </span><span class="no">x0</span><span class="p">,</span><span class="w"> </span><span class="no">KERNEL_START</span><span class="w">                </span><span class="c1">// __pa(KERNEL_START)</span>
<span class="w">        </span><span class="nf">br</span><span class="w">      </span><span class="no">x8</span>
<span class="nf">SYM_FUNC_END</span><span class="p">(</span><span class="no">__primary_switch</span><span class="p">)</span>
</pre></div>
<p>在执行到__primary_switched之后，1:1的mapping就不在使用。仅仅在切换swapper_pg_dir页表的时候临时使用一次。 参考： <a class="reference external" href="../../../posts/2024/05/init_idmap_pg_dir.html">Arm64 Linux 下页表 init_idmap_pg_dir的使用</a>
而在 <a class="reference external" href="../../../posts/2024/05/fdt_mapping.html">FDT的区域的Map过程</a> 中，有提到在__primary_switched-&gt;init_feature_override中会临时使用device tree，要为device tree 临时建立页表。 这里其实也会修改表init_pg_dir 里面的内容：</p>
<!--  -->
<blockquote>
这时候不可以用init_pg_dir dump页表，因为这个时候mmu已经enable，而变量init_pg_dir就已经是0xffff开头的地址。</blockquote>
<div class="highlight"><pre><span></span>&gt;mmu<span class="w"> </span>print<span class="w"> </span>EL1N_S1_TTBR1_EL1<span class="w"> </span><span class="nv">TTBR1_EL1</span><span class="o">=</span>0x00000000865DA000
Input<span class="w"> </span>Address<span class="w">            </span><span class="p">|</span><span class="w"> </span>Type<span class="w">           </span><span class="p">|</span><span class="w"> </span>Next<span class="w"> </span>Level<span class="w">            </span><span class="p">|</span><span class="w"> </span>Output<span class="w"> </span>Address<span class="w">        </span><span class="p">|</span><span class="w"> </span>Properties
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
+<span class="w"> </span>0xFFFF000000000000<span class="w">     </span><span class="p">|</span><span class="w"> </span>TTBR1_EL1<span class="w">      </span><span class="p">|</span><span class="w"> </span>NP:0x00000000865DA000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">TBI1</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">TBI0</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">AS</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">IPS</span><span class="o">=</span>256TB,<span class="w"> </span><span class="nv">TG1</span><span class="o">=</span>4KB,<span class="w"> </span><span class="nv">SH1</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">ORGN1</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">IRGN1</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">EPD1</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">A1</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">T1SZ</span><span class="o">=</span><span class="m">16</span>,<span class="w"> </span><span class="nv">TG0</span><span class="o">=</span>4KB,<span class="w"> </span><span class="nv">SH0</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">ORGN0</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">IRGN0</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">EPD0</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">T0SZ</span><span class="o">=</span><span class="m">16</span>,<span class="w"> </span><span class="nv">HPD1</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">HPD0</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">HD</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">HA</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">CnP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">ASID</span><span class="o">=</span><span class="m">0</span>
<span class="w"> </span>-<span class="w"> </span>0xFFFF000000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x256<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w"> </span>+<span class="w"> </span>0xFFFF800000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">0</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x00000000865DB000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">  </span>+<span class="w"> </span>0xFFFF800000000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">1</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x00000000865DC000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">   </span>-<span class="w"> </span>0xFFFF800000000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x64<span class="o">)</span><span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008200000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084200000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008400000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084400000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008600000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084600000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008800000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084800000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008A00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084A00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008C00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084C00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008E00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084E00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009200000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085200000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009400000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085400000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009600000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085600000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009800000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085800000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009A00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085A00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009C00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085C00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009E00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085E00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A200000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086200000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A400000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086400000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A600000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x429<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">  </span>-<span class="w"> </span>0xFFFF800040000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x511<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w"> </span>-<span class="w"> </span>0xFFFF808000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x246<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w"> </span>+<span class="w"> </span>0xFFFFFB8000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">0</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086542000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">  </span>-<span class="w"> </span>0xFFFFFB8000000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x511<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">  </span>+<span class="w"> </span>0xFFFFFBFFC0000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">1</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086543000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">   </span>-<span class="w"> </span>0xFFFFFBFFC0000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x493<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">   </span>+<span class="w"> </span>0xFFFFFBFFFDA00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086544000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">    </span>-<span class="w"> </span>0xFFFFFBFFFDA00000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x512<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">   </span>-<span class="w"> </span>0xFFFFFBFFFDC00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000082000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFFFBFFFDE00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x17<span class="o">)</span><span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w"> </span>-<span class="w"> </span>0xFFFFFC0000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x8<span class="o">)</span><span class="w">   </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
</pre></div>
<p>可以发现，后面建立的几个页表不是在init_pg_dir 这个里面，而是在全局变量中：</p>
<div class="highlight"><pre><span></span>&gt;p/x<span class="w"> </span>init_pg_end
<span class="nv">$9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>unsigned<span class="w"> </span>char*<span class="o">)</span><span class="w"> </span>EL1N:0x00000000865DD000
&gt;p/x<span class="w"> </span>init_pg_dir
<span class="nv">$10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>unsigned<span class="w"> </span>char*<span class="o">)</span><span class="w"> </span>EL1N:0x00000000865DA000
</pre></div>
<div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="n">pte_t</span><span class="w"> </span><span class="n">bm_pte</span><span class="p">[</span><span class="n">NR_BM_PTE_TABLES</span><span class="p">][</span><span class="n">PTRS_PER_PTE</span><span class="p">]</span><span class="w"> </span><span class="n">__page_aligned_bss</span><span class="p">;</span>
<span class="k">static</span><span class="w"> </span><span class="n">pmd_t</span><span class="w"> </span><span class="n">bm_pmd</span><span class="p">[</span><span class="n">PTRS_PER_PMD</span><span class="p">]</span><span class="w"> </span><span class="n">__page_aligned_bss</span><span class="w"> </span><span class="n">__maybe_unused</span><span class="p">;</span>
<span class="k">static</span><span class="w"> </span><span class="n">pud_t</span><span class="w"> </span><span class="n">bm_pud</span><span class="p">[</span><span class="n">PTRS_PER_PUD</span><span class="p">]</span><span class="w"> </span><span class="n">__page_aligned_bss</span><span class="w"> </span><span class="n">__maybe_unused</span><span class="p">;</span>
</pre></div>
</div>
<div class="section" id="init-pg-dirswapper-pg-dir">
<h2>从init_pg_dir切换到swapper_pg_dir</h2>
<p>从__primary_switched 开始到swapper_pg_dir生效，kernel一直使用init_pg_dir这个页表。 期间为了使能串口等调试设备，可以要进行一些IO的mapping，比如：</p>
<div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="n">__no_sanitize_address</span><span class="w"> </span><span class="n">setup_arch</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">cmdline_p</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="c1">//....</span>
<span class="w">        </span><span class="n">early_fixmap_init</span><span class="p">();</span>
<span class="w">        </span><span class="n">early_ioremap_init</span><span class="p">();</span>

<span class="w">        </span><span class="n">setup_machine_fdt</span><span class="p">(</span><span class="n">__fdt_pointer</span><span class="p">);</span>
<span class="w">        </span><span class="c1">//...</span>
<span class="w">        </span><span class="n">parse_early_param</span><span class="p">();</span>
</pre></div>
<p>执行完parse_early_param 之后，我们可以看到在fixe memory map里面有了一些IO的映射,比如地址： 0x000000001C090000就是u-boot的bootargs给的一个地址：</p>
<div class="highlight"><pre><span></span><span class="nv">CONFIG_BOOTARGS</span><span class="o">=</span><span class="s2">&quot;console=ttyAMA0 earlycon=pl011,0x1c090000 root=/dev/vda2 rw ip=dhcp debug user_debug=31 loglevel=9&quot;</span>
</pre></div>
<div class="highlight"><pre><span></span>&gt;mmu<span class="w"> </span>print<span class="w"> </span>EL1N_S1_TTBR1_EL1<span class="w"> </span><span class="nv">TTBR1_EL1</span><span class="o">=</span>0x00000000865DA000
Input<span class="w"> </span>Address<span class="w">            </span><span class="p">|</span><span class="w"> </span>Type<span class="w">           </span><span class="p">|</span><span class="w"> </span>Next<span class="w"> </span>Level<span class="w">            </span><span class="p">|</span><span class="w"> </span>Output<span class="w"> </span>Address<span class="w">        </span><span class="p">|</span><span class="w"> </span>Properties
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
+<span class="w"> </span>0xFFFF000000000000<span class="w">     </span><span class="p">|</span><span class="w"> </span>TTBR1_EL1<span class="w">      </span><span class="p">|</span><span class="w"> </span>NP:0x00000000865DA000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">TBI1</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">TBI0</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">AS</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">IPS</span><span class="o">=</span>256TB,<span class="w"> </span><span class="nv">TG1</span><span class="o">=</span>4KB,<span class="w"> </span><span class="nv">SH1</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">ORGN1</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">IRGN1</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">EPD1</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">A1</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">T1SZ</span><span class="o">=</span><span class="m">16</span>,<span class="w"> </span><span class="nv">TG0</span><span class="o">=</span>4KB,<span class="w"> </span><span class="nv">SH0</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">ORGN0</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">IRGN0</span><span class="o">=</span>0x1,<span class="w"> </span><span class="nv">EPD0</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">T0SZ</span><span class="o">=</span><span class="m">16</span>,<span class="w"> </span><span class="nv">HPD1</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">HPD0</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">HD</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">HA</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">CnP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">ASID</span><span class="o">=</span><span class="m">0</span>
<span class="w"> </span>-<span class="w"> </span>0xFFFF000000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x256<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w"> </span>+<span class="w"> </span>0xFFFF800000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">0</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x00000000865DB000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">  </span>+<span class="w"> </span>0xFFFF800000000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">1</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x00000000865DC000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">   </span>-<span class="w"> </span>0xFFFF800000000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x64<span class="o">)</span><span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008200000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084200000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008400000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084400000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008600000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084600000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008800000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084800000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008A00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084A00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008C00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084C00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800008E00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000084E00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009200000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085200000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009400000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085400000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009600000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085600000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009800000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085800000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009A00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085A00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009C00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085C00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF800009E00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000085E00000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A200000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086200000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A400000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086400000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFF80000A600000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x429<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">  </span>-<span class="w"> </span>0xFFFF800040000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x511<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w"> </span>-<span class="w"> </span>0xFFFF808000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x246<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w"> </span>+<span class="w"> </span>0xFFFFFB8000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">0</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086542000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">  </span>-<span class="w"> </span>0xFFFFFB8000000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x511<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">  </span>+<span class="w"> </span>0xFFFFFBFFC0000000<span class="w">   </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">1</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086543000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">   </span>-<span class="w"> </span>0xFFFFFBFFC0000000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x493<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">   </span>+<span class="w"> </span>0xFFFFFBFFFDA00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Table<span class="w">  </span><span class="p">|</span><span class="w"> </span>NP:0x0000000086544000<span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nv">APTable</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">UXNTable</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">PXNTable</span><span class="o">=</span><span class="m">0</span>
<span class="w">    </span>-<span class="w"> </span>0xFFFFFBFFFDA00000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x511<span class="o">)</span><span class="w"> </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w">    </span>-<span class="w"> </span>0xFFFFFBFFFDBFF000<span class="w"> </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">3</span><span class="w"> </span>Page<span class="w">   </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x000000001C090000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x0,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x4
<span class="w">   </span>-<span class="w"> </span>0xFFFFFBFFFDC00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Level<span class="w"> </span><span class="m">2</span><span class="w"> </span>Block<span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span>NP:0x0000000082000000<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">UXN</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">PXN</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">Contiguous</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">DBM</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">GP</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">nG</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">AF</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">SH</span><span class="o">=</span>0x3,<span class="w"> </span><span class="nv">AP</span><span class="o">=</span>0x2,<span class="w"> </span><span class="nv">AttrIndx</span><span class="o">=</span>0x0
<span class="w">   </span>-<span class="w"> </span>0xFFFFFBFFFDE00000<span class="w">  </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x17<span class="o">)</span><span class="w">  </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
<span class="w"> </span>-<span class="w"> </span>0xFFFFFC0000000000<span class="w">    </span><span class="p">|</span><span class="w"> </span>Invalid<span class="w"> </span><span class="o">(</span>x8<span class="o">)</span><span class="w">   </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span><span class="w">                       </span><span class="p">|</span>
</pre></div>
<p>当swapper_pg_dir 页表准备好之后，init_task 的init_mm-&gt;pgd就会从init_pg_dir 切换成swapper_pg_dir，同时TTBR1设置成 swapper_pg_dir的值。
切换TTBR的时候，会用到前面1：1 的映射：</p>
<div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="nf">paging_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="n">pgd_t</span><span class="w"> </span><span class="o">*</span><span class="n">pgdp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pgd_set_fixmap</span><span class="p">(</span><span class="n">__pa_symbol</span><span class="p">(</span><span class="n">swapper_pg_dir</span><span class="p">));</span>
<span class="w">    </span><span class="c1">//....</span>
<span class="w">        </span><span class="n">cpu_replace_ttbr1</span><span class="p">(</span><span class="n">lm_alias</span><span class="p">(</span><span class="n">swapper_pg_dir</span><span class="p">),</span><span class="w"> </span><span class="n">init_idmap_pg_dir</span><span class="p">);</span>
<span class="w">        </span><span class="n">init_mm</span><span class="p">.</span><span class="n">pgd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">swapper_pg_dir</span><span class="p">;</span>

<span class="w">        </span><span class="n">memblock_phys_free</span><span class="p">(</span><span class="n">__pa_symbol</span><span class="p">(</span><span class="n">init_pg_dir</span><span class="p">),</span>
<span class="w">                           </span><span class="n">__pa_symbol</span><span class="p">(</span><span class="n">init_pg_end</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">__pa_symbol</span><span class="p">(</span><span class="n">init_pg_dir</span><span class="p">));</span>
</pre></div>
<p>完成这些动作之后，init_pg_dir和init_idmap_pg_dir的使命就完成了，第二个CPU boot的时候也不会使用这两个页表。
这个时候可以回收init_pg_dir所占用的空间。 但是前面那些fix map是不会被回收，而是把它们接在swapper_pg_dir里面继续使用。 这个 <a class="reference external" href="../../../posts/2024/05/fdt_mapping.html">FDT的区域的Map过程</a> 有提过。</p>
<p>init_idmap_pg_dir的空间的回收利用，参考： <a class="reference external" href="../../../posts/2024/05/init_idmap_pg_dir.html">Arm64 Linux 下页表 init_idmap_pg_dir的使用</a></p>
</div>

    </div><!-- /.entry-content -->
    <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "posts/2024/05/init_pg_dir.html";
        var disqus_url = "https://geesun.github.io/posts/2024/05/init_pg_dir.html";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//geesun.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>

  </article>
</section>

        <footer id="contentinfo" class="body">
                <p>&copy; 2024 Qixiang Xu</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'geesun';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>